{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["import { getPath } from 'mobx-state-tree'\n\nconst getAction = (call) => {\n  const {\n    name,\n    type,\n    context,\n    args,\n  } = call\n\n  const path = getPath(context)\n  const fullpath = `${path}/${name}`\n\n  const action = {\n    fullpath,\n    path,\n    name,\n    args,\n  }\n\n  switch (type) {\n    case 'process_return': return { ...action, ended: true }\n    case 'action': return action\n    default: return undefined\n  }\n}\n\nexport default dispatch => (call, next) => {\n  const action = getAction(call)\n\n  if (action) dispatch(action, call.tree)\n\n  return next(call)\n}\n"],"names":["getAction","call","name","type","context","args","path","getPath","action","ended","next","dispatch","tree"],"mappings":"o0CAEMA,EAAY,SAACC,OAEfC,EAIED,EAJFC,KACAC,EAGEF,EAHFE,KACAC,EAEEH,EAFFG,QACAC,EACEJ,EADFI,KAGIC,EAAOC,UAAQH,GAGfI,YAFcF,MAAQJ,+BASpBC,OACD,6BAA8BK,GAAQC,OAAO,QAC7C,gBAAiBD,6CAKC,SAACP,EAAMS,OAC1BF,EAASR,EAAUC,UAErBO,GAAQG,EAASH,EAAQP,EAAKW,MAE3BF,EAAKT"}