{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["const getAction = (call) => {\n  const { name, type, context, args } = call\n  const path = context.$treenode.path\n  const fullpath = `${path}/${name}`\n\n  const action = { fullpath, path, name, args }\n\n  switch (type) {\n    case 'process_return': return { ...action, ended: true }\n    case 'action': return action\n    default: return undefined\n  }\n}\n\nexport default dispatch => (call, next) => {\n  const action = getAction(call)\n\n  if (action) dispatch(action, call.tree)\n\n  return next(call)\n}\n"],"names":["getAction","call","name","type","context","args","path","$treenode","action","fullpath","ended","next","dispatch","tree"],"mappings":"swCAAMA,EAAY,SAACC,OACTC,EAA8BD,EAA9BC,KAAMC,EAAwBF,EAAxBE,KAAMC,EAAkBH,EAAlBG,QAASC,EAASJ,EAATI,KACvBC,EAAOF,EAAQG,UAAUD,KAGzBE,GAAWC,SAFGH,MAAQJ,EAEDI,OAAMJ,OAAMG,eAE/BF,OACD,6BAA8BK,GAAQE,OAAO,QAC7C,gBAAiBF,6CAKC,SAACP,EAAMU,OAC1BH,EAASR,EAAUC,UAErBO,GAAQI,EAASJ,EAAQP,EAAKY,MAE3BF,EAAKV"}